#INCLUDE <p18f4520.inc>
	CONFIG OSC = INTIO67
	CONFIG WDT = OFF 
	org 0x00 ;PC = 0x10     
;0x02-0x04 formula
;0x05 F0
;0x06 F1
setup:
MOVLW 0x09;
MOVWF 0x10
program:
MOVLW 0x00
MOVWF 0x05;F0
MOVLW 0x01
MOVWF 0x06;F1

MOVFF 0x05,0x12
MOVFF 0x06,0x14
DECF 0x10
    
loop:
rcall fib
MOVFF 0x15,0x11
MOVFF 0x16,0x12
DCFSNZ 0x10
GOTO final  
rcall fib
MOVFF 0x15,0x13
MOVFF 0x16,0x14
DECFSZ 0x10
GOTO loop
GOTO final   
    
fib:
MOVF 0x12,w
ADDWF 0x14,w
MOVWF 0x16
BNC upper
INCF 0x15
upper:    
MOVF 0x11,w
ADDWF 0x13,w
ADDWF 0x15
RETURN

final:
MOVFF 0x15,0x00    
MOVFF 0x16,0x01
end
